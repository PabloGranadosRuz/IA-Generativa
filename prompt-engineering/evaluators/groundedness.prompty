---
name: Groundedness Evaluator
description: Eval√∫a la fundamentaci√≥n de una respuesta verificando su alineaci√≥n con el contexto proporcionado o la informaci√≥n factual.
version: 1.0

model: 
  api: chat  
  configuration:
    name: ${env:OLLAMA_MODEL}
    type: openai    
    base_url: ${env:OLLAMA_API_URL}    
    api_key: ${env:OLLAMA_API_KEY}
  parameters:
    max_tokens: 100
    temperature: 0.7

inputs:
    - name: context
      type: string
      description: The factual or reference context to evaluate against.
    - name: response
      type: string
      description: The response to evaluate for groundedness.

outputs:
    - name: score
      type: number
      description: A score between 0 and 1 indicating the groundedness of the response.
    - name: feedback
      type: string
      description: Feedback explaining the evaluation result.

evaluationLogic:
    language: python
    script: |
        def evaluate(context, response):
            from difflib import SequenceMatcher

            # Simple similarity-based evaluation
            similarity = SequenceMatcher(None, context, response).ratio()
            score = round(similarity, 2)

            feedback = (
                "The response is well-grounded in the context."
                if score > 0.7
                else "The response lacks sufficient grounding in the context."
            )

            return {"score": score, "feedback": feedback}

        result = evaluate(context, response)
        return result

sample:
    context: |
        Eres un asistente de IA que ayuda a los usuarios a mejorar sus t√≠tulos de v√≠deos de YouTube. Aqu√≠ tienes los consejos de YouTube:
        - S√© preciso. Aseg√∫rate de que el t√≠tulo represente con exactitud el video.
        - S√© breve. Intenta ser breve y colocar las palabras m√°s importantes cerca del comienzo.
        - Limita el uso de MAY√öSCULAS y emojis.
    response: |
        "C√≥mo mejorar tus t√≠tulos de YouTube üé• #TipsCreativos"